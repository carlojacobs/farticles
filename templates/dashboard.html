{% extends 'layout.html' %}

{% block body %}
	<div class="container">
		<h1>Dashboard <small>Welcome {{session.name}}</small></h1>
		<a href="/add_article" class="btn btn-success btn-lg">Post New Farticle</a>
		<hr>
	</div>
	<table class="table table-striped">
		<tr>
			<th>Title</th>
			<th>Author</th>
			<th>Date</th>
			<th></th>
			<th></th>
		</tr>

		{% for article in articles %}
			<tr>
				<td><a href="/article/{{article._id}}">{{article.title}}</a></td>
				<td>{{article.author}}</td>
				<td>{{article.date}}</td>
				<td><a href="/edit_article/{{article._id}}" class="btn btn-secondary float-right">Edit</a></td>
				<td><button type="button" class="btn btn-danger" data-toggle="modal" data-target="#deleteModal">Delete</button></td>
			</tr>
			<!-- Modal -->
			<div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
			  <div class="modal-dialog" role="document">
			    <div class="modal-content">
			      <div class="modal-header">
			        <h5 class="modal-title" id="exampleModalLabel">Delete article</h5>
			        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
			          <span aria-hidden="true">&times;</span>
			        </button>
			      </div>
			      <div class="modal-body">
			        <p>Are you sure you want to delete this?</p>
			      </div>
			      <div class="modal-footer">
			        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
			        <!-- <button type="button" class="btn btn-primary">Save changes</button> -->
			        <form action="{{url_for('delete_article', id=article._id)}}" method="POST">
			        	<input type="hidden" name="_method" value="DELETE">
			        	<input type="submit" name="Delete" class="btn btn-danger" value="Delete">
			        </form>
			      </div>
			    </div>
			  </div>
			</div>
		{% endfor %}

	</table>
{% endblock %}